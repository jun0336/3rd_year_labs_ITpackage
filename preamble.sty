% ONLY FOR PACKAGES.
% Declare that this style file requires at least LaTeX version 2e.
\NeedsTeXFormat{LaTeX2e}
% !TEX program = xelatex
% Magic comment to set up XeLaTeX compiling. Please set it up manually if it does not work.
% Provide the name of your page, the date it was last updated, and a comment about what it's used for
\ProvidesPackage{preamble}[2022/10/14 Jun's custom LaTeX style]

% Documentary Packages 
\usepackage[english]{babel} %[ngerman] if the report is in German
\usepackage[margin=2.5cm]{geometry} 
\linespread{1.1} 
\usepackage{booktabs,caption}
\usepackage[flushleft]{threeparttable} %Table with notes
\usepackage[labelfont=bf]{caption} % Caption of the figures/schemes/tables
\usepackage{float}
\usepackage{newfloat}
\usepackage{comment} % Multi-lines uncompiled comment
\usepackage[margin=1cm]{caption}
\captionsetup[subfigure]{width=0.9\textwidth} 
\usepackage{pdfpages}
\usepackage{varwidth}
\usepackage[ddmmyyyy]{datetime}
\renewcommand{\dateseparator}{.}
\usepackage{siunitx}
\sisetup{table-format=5.4, round-mode=figures, round-precision=3} %Unify the decimal number

% Scientific Packages
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{relsize}
\usepackage{upgreek}
\usepackage{nccmath}
\usepackage{subcaption}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage[export]{adjustbox}
\usepackage{multirow, multicol} 
\usepackage{titling}
\usepackage{color}
\usepackage{chemformula}
\usepackage{csvsimple} 
\usepackage{pgfplotstable}
\usepackage{balance}
\usepackage{array} 
\usepackage{filecontents}
\usepackage{wrapfig}
\usepackage{wasysym}%
%\usepackage{mathtools}
\usepackage{gensymb}
\usepackage{textcomp}	
\usepackage{epstopdf}
\usepackage{fancyhdr} %Head- and footnotes
\usepackage{pdfpages}
\usepackage{listings} %For codes
\DeclareFloatingEnvironment[
  fileext = los ,
  listname = {List of Schemes} ,
  name = Scheme
]{scheme}
\usepackage{enumitem}
%\usepackage{csvsimple}

%\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
%\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}
\usepackage[ddmmyyyy]{datetime}
\renewcommand{\dateseparator}{.}
\usepackage[export]{adjustbox}
\usepackage{titling}
\usepackage{pgfplotstable}
\usepackage{varwidth}

% Automatic newline in table
\usepackage{makecell}
\renewcommand\theadalign{bc}
\renewcommand{\cellalign}{bl}
\renewcommand{\theadalign}{bl}
\renewcommand\theadfont{\bfseries}
\renewcommand\theadgape{\Gape[4pt]}
\renewcommand\cellgape{\Gape[4pt]}
% Manual: \makecell{a \\ b}; b is then in newline.

\newcommand{\tabitem}{~~\llap{\textbullet}~~}

% Header and footer on the title page
\fancypagestyle{firstpage}
{
	\renewcommand{\headrulewidth}{0pt}
    \fancyhead[L]{A \LaTeX Template for your report}
    \fancyhead[R]{Spring Semester 2023} 
    \fancyhead[C]{}
    \fancyfoot[L]{}
    \fancyfoot[C]{}
    \fancyfoot[R]{}
    
}

% Header and footer on the rest pages
\pagestyle{fancy}
\fancyhf{}
\lhead{A \LaTeX Template for your report}
\chead{ETH Z\"urich}
\rhead{Spring Semester 2023} 
\lfoot{Group XXX}
\cfoot{\thepage}
\rfoot{\today}

%This part is dedicated to breaking URL's
\usepackage[hyphens]{url}
\usepackage[hidelinks]{hyperref}
\hypersetup{breaklinks=true}
\def\UrlBreaks{\do\/\do-}
\urlstyle{same}
\UseRawInputEncoding %Be careful here

%This part is dedicated to citations using the achemso package
\usepackage{fixltx2e}
\usepackage{lmodern}
\usepackage{booktabs}
%\usepackage{hypdoc} 
%\usepackage{mathpazo} 
\usepackage{microtype}
%\usepackage{achemso} 
%\setkeys{acs}{usetitle = true}

% GHS pictograms
\ExplSyntaxOn
\cs_new:Npn \chemmacros_load_module:n #1 {}
\ExplSyntaxOff
\usepackage{ghsystem}
\usepackage{stackengine}


%This part is dedicated to citations using biblatex: chem-angew or chem-acs
%\usepackage[breaklinks=true]{hyperref}
\usepackage{csquotes}
\usepackage[ autocite  = superscript, 
    backend  = bibtex, 
    sorting = none,
    sortcites   = false,
    style       = chem-acs,
    doi = true,
    url = true,
    natbib = true
]{biblatex}

\renewbibmacro{in:}{}					%Supressing "in"


%This part is dedicated to make et al in italics
\newcommand*{\mkandothers}{\mkbibemph}
\renewbibmacro*{name:andothers}{%
  \ifboolexpr{
    test {\ifnumequal{\value{listcount}}{\value{liststop}}}
    and
    test \ifmorenames
  }
    {\ifnumgreater{\value{liststop}}{1}
       {\finalandcomma}
       {}%
     \andothersdelim\bibstring[\mkandothers]{andothers}}
    {}}

\renewcommand{\cite}{\supercite}						%change cite to supercite

\renewcommand{\textregistered}{\textsuperscript{\textregistered}} %superscript all registered symbol

%\let\mkbibsuperbracket\mkbibsuperscript				%Easier way to change to no brackets
\DeclareCiteCommand{\supercite}[\mkbibsuperscript]		% Change here
  {\usebibmacro{cite:init}
   \let\multicitedelim=\supercitedelim
   \iffieldundef{prenote}
     {}
     {\BibliographyWarning{Ignoring prenote argument}}%
   \iffieldundef{postnote}
     {}
     {\BibliographyWarning{Ignoring postnote argument}}}
  {\usebibmacro{citeindex}%
   \usebibmacro{cite:comp}}
  {}
  {\usebibmacro{cite:dump}}							%No brackets in chem-angew



\newcommand*\wildcard[2][5cm]{\vspace*{0cm}\parbox{#1}{\hrulefill\par#2}} %For multiple signatures

%This part is dedicated to  multicol
%\setlength{\columnsep}{<width>}
%\multicoltolerance = 9999 								%Default = 9999
%\raggedcolumns										%So that the bottom doesn't align


% change the size of the title of the abstract
\setlength{\headheight}{27.18335pt}
\renewenvironment{abstract}
 {\small
  \begin{center}
  \bfseries \large \abstractname\vspace{-.5em}\vspace{0pt}
  \end{center}
  \list{}{%
    \setlength{\leftmargin}{1.5cm}% <---------- CHANGE Abstract Margin
    \setlength{\rightmargin}{\leftmargin}%
  }%
  \item\relax}
 {\endlist}

\renewbibmacro*{doi+eprint+url}{%
  \iftoggle{bbx:doi}
    {\iffieldundef{url}{\printfield{doi}}{}}
    {}%
  \newunit\newblock
  \iftoggle{bbx:eprint}
    {\usebibmacro{eprint}}
    {}%
  \newunit\newblock
  \iftoggle{bbx:url}
    {\usebibmacro{url+urldate}}
    {}}
% Display url only if doi not present
\DeclareSourcemap{
  \maps[datatype=bibtex]{
    \map[overwrite]{
      \step[fieldsource=doi, final]
      \step[fieldset=url, null]
      \step[fieldset=eprint, null]
    }  
  }
}
\addbibresource{bibliography.bib}

\setlength\parindent{0pt}


%Code
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

\graphicspath{ {"../Bilder/"} }

\newcommand{\headerline}[4]{%
\par\medskip\noindent
\makebox[200pt][l]{#1}%
\makebox[115pt][c]{#2}%
\makebox[115pt][r]{#3}\par\medskip}

\endinput
